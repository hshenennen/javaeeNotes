

---

# Java 判断平年与闰年（Leap Year）

> [!info] 学习目标
> - 掌握闰年的判断规则  
> - 能用 `if-else` 实现闰年逻辑  
> - 编写可复用的方法 `isLeapYear(int year)`  
> - 避免常见逻辑错误（如顺序错误）

---

## 📜 闰年判断规则（公历 Gregorian Calendar）

一个年份是**闰年**，当且仅当满足以下条件之一：

1. ✅ **能被 4 整除**，**但不能被 100 整除**；**或者**
2. ✅ **能被 400 整除**

> 💡 简记口诀：  
> **“四年一闰，百年不闰，四百年再闰”**

### ✅ 示例：
| 年份 | 是否闰年 | 原因 |
|------|--------|------|
| 2000 | ✅ 是 | 能被 400 整除 |
| 1900 | ❌ 否 | 能被 100 整除，但不能被 400 整除 |
| 2024 | ✅ 是 | 能被 4 整除，且不能被 100 整除 |
| 2023 | ❌ 否 | 不能被 4 整除 |

---

## ✅ Java 实现方式

### 方法 1：直接使用 `if-else` 判断

```java
public class LeapYear {
    public static void main(String[] args) {
        int year = 2024;

        if ((year % 4 == 0 && year % 100 != 0) || (year % 400 == 0)) {
            System.out.println(year + " 是闰年");
        } else {
            System.out.println(year + " 是平年");
        }
    }
}
```

### 方法 2：封装成方法（推荐 ✅）

```java
public static boolean isLeapYear(int year) {
    return (year % 4 == 0 && year % 100 != 0) || (year % 400 == 0);
}

// 使用示例
System.out.println(isLeapYear(2000)); // true
System.out.println(isLeapYear(1900)); // false
```

> 💡 优点：代码复用、逻辑清晰、便于测试

---

## 🔍 逻辑解析（为什么这样写？）

```java
(year % 4 == 0 && year % 100 != 0)  // 情况1：能被4整除但不是整百年
|| 
(year % 400 == 0)                   // 情况2：是整百年但能被400整除
```

> ⚠️ **常见错误**：  
> 错误地先判断 `year % 100 == 0`，会导致 2000 年被误判为平年！

✅ 正确顺序：**先处理“能被4整除”，再排除“整百年”，最后补回“400整除”**

---

## 🧪 测试用例（建议验证）

| 输入 | 期望输出 |
|------|--------|
| 2000 | 闰年 ✅ |
| 1900 | 平年 ❌ |
| 2024 | 闰年 ✅ |
| 2023 | 平年 ❌ |
| 2004 | 闰年 ✅ |
| 2100 | 平年 ❌ |

---

## 💡 扩展练习（进阶）

### 1. 用户输入年份并判断
```java
import java.util.Scanner;

Scanner sc = new Scanner(System.in);
System.out.print("请输入年份: ");
int year = sc.nextInt();
if (isLeapYear(year)) {
    System.out.println("闰年");
} else {
    System.out.println("平年");
}
```

### 2. 输出某范围内所有闰年
```java
for (int y = 1900; y <= 2100; y++) {
    if (isLeapYear(y)) {
        System.out.println(y);
    }
}
```

### 3. 结合日期类（Java 8+）
```java
import java.time.Year;

Year y = Year.of(2024);
if (y.isLeap()) {
    System.out.println("闰年");
}
```
> ⚠️ 注意：这是现代 API，但初学者建议先掌握手动判断逻辑

---

## ⚠️ 常见误区

| 错误写法 | 问题 |
|--------|------|
| `if (year % 4 == 0)` | 忽略了 1900 这类整百年 |
| `if (year % 400 == 0 || year % 4 == 0)` | 1900 会被误判为闰年（因为 1900%4==0） |
| 先判断 `%100` 再判断 `%4` | 逻辑混乱，结果错误 |

✅ **记住核心公式**：
```java
(year % 4 == 0 && year % 100 != 0) || (year % 400 == 0)
```

---

## 📝 小结

- 闰年判断是 **复合条件判断** 的典型应用
- 关键在于理解规则，并**正确组合逻辑运算符**
- 封装成方法 `isLeapYear()` 是良好编程习惯
- 可结合 `Scanner`、循环、数组等做更多练习

---




