
---

# 🔢 Java 判断质数（素数）

> [!info] 学习目标
> - 理解质数的定义  
> - 能用 `for` 循环和 `if` 实现质数判断  
> - 掌握优化技巧（减少循环次数）  
> - 编写完整交互程序（用户输入 + 判断）  
>

---

## 📚 什么是质数？

> **质数（Prime Number）**：  
> 一个大于 1 的自然数，**除了 1 和它本身外，不能被其他自然数整除**。

### ✅ 示例：
| 数字 | 是否质数 | 原因 |
|------|--------|------|
| 2 | ✅ 是 | 最小的质数，也是唯一的偶质数 |
| 3 | ✅ 是 | 只能被 1 和 3 整除 |
| 4 | ❌ 否 | 能被 2 整除 |
| 17 | ✅ 是 | 无法被 2~16 中任何数整除 |
| 1 | ❌ 否 | 质数必须 **大于 1** |

---

## ✅ 基础实现思路

1. 如果 `n <= 1` → 不是质数  
2. 如果 `n == 2` → 是质数  
3. 如果 `n` 是偶数（且 ≠2）→ 不是质数  
4. 从 `3` 到 `n-1`（或优化到 `√n`），检查是否有因数

---

## 💻 完整代码

```java
import java.util.Scanner;

public class PrimeChecker {
    public static void main(String[] args) {
        Scanner scanner = new Scanner(System.in);

        System.out.print("请输入一个整数: ");
        int n = scanner.nextInt();

        // 1. 小于等于1的数不是质数
        if (n <= 1) {
            System.out.println(n + " 不是质数。");
        } 
        // 2. 2 是质数
        else if (n == 2) {
            System.out.println(n + " 是质数。");
        } 
        // 3. 偶数（除2外）不是质数
        else if (n % 2 == 0) {
            System.out.println(n + " 不是质数。");
        } 
        // 4. 检查奇数因数（从3到√n）
        else {
            boolean isPrime = true;
            // 只需检查到 √n（取整）
            int limit = (int) Math.sqrt(n);
            for (int i = 3; i <= limit; i += 2) { // 只检查奇数
                if (n % i == 0) {
                    isPrime = false;
                    break; // 找到因数，提前退出
                }
            }
            if (isPrime) {
                System.out.println(n + " 是质数。");
            } else {
                System.out.println(n + " 不是质数。");
            }
        }

        scanner.close();
    }
}
```

---

## 🔍 代码逻辑详解

### 1. 特殊情况处理
```java
if (n <= 1) → 非质数
if (n == 2) → 质数
if (n % 2 == 0) → 非质数（排除所有偶数）
```

### 2. 优化：只检查到 `√n`
- 原理：如果 `n` 有因数，**必定有一个 ≤ √n**
- 例如：`n = 35`，因数对 `(5,7)`，其中 `5 < √35 ≈ 5.9`
- 所以只需检查 `2 ~ √n` 即可

### 3. 进一步优化：只检查奇数
- 因为偶数已在前面排除，所以从 `3` 开始，每次 `+2`

> ✅ 时间复杂度：从 O(n) 优化到 **O(√n)**

---

## 🧪 测试用例

| 输入 | 输出 |
|------|------|
| 1 | 不是质数 |
| 2 | 是质数 |
| 3 | 是质数 |
| 4 | 不是质数 |
| 17 | 是质数 |
| 25 | 不是质数（5×5） |
| 97 | 是质数 |
| 100 | 不是质数 |

---

## ⚠️ 常见错误

| 错误 | 说明 |
|------|------|
| 忘记处理 `n <= 1` | 1 不是质数！ |
| 循环从 `2` 到 `n-1` | 效率低，大数会卡顿 |
| 未使用 `break` | 找到因数后仍继续循环，浪费性能 |
| 用 `i < n` 而非 `i <= √n` | 逻辑正确但效率差 |

---
