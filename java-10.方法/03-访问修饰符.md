
---

# Java 访问修饰符

> **标签**：`#Java/基础` `#Java/封装` `#访问控制`

## 什么是访问修饰符？

**访问修饰符（Access Modifiers）** 用于控制类、方法、变量等成员的**可见性**和**访问权限**。  
Java 提供了四种访问级别，通过三个关键字 + 一个默认状态实现。

---

## 四种访问级别

| 修饰符 | 类内 | 同包 | 子类 | 全局（任何地方） | 说明 |
|--------|------|------|------|------------------|------|
| `private` | ✅ | ❌ | ❌ | ❌ | 仅本类可见 |
| 默认（无修饰符） | ✅ | ✅ | ❌ | ❌ | 仅同包可见（也叫“包私有”） |
| `protected` | ✅ | ✅ | ✅ | ❌ | 同包 + 所有子类（即使子类在其他包） |
| `public` | ✅ | ✅ | ✅ | ✅ | 对所有类可见 |

> 💡 **记忆口诀**：  
> **“私有最严，公有最宽；默认同包，保护带子传。”**

---

## 详细说明

### 1. `private`
- **最严格的访问控制**。
- 只能在**定义它的类内部**访问。
- 常用于封装：将字段设为 `private`，通过 `public` 的 getter/setter 暴露。

```java
public class Person {
    private String name; // 外部无法直接访问

    public String getName() {
        return name; // 通过方法间接访问
    }
}
```

### 2. 默认（包私有 / package-private）
- **不写任何修饰符**即为默认。
- 同一个包（package）下的所有类都可以访问。

```java
// 文件：com.example.util.Helper.java
class Helper { // 默认访问权限
    void doSomething() { ... }
}

// 同包下的其他类可调用 doSomething()
```

### 3. `protected`
- 比默认更宽松：**同包 + 所有子类**（无论子类是否在同一个包）。
- 常用于父类中希望被子类继承但又不想公开给所有类的成员。

```java
// 父类（包：animal）
public class Animal {
    protected void makeSound() {
        System.out.println("Some sound");
    }
}

// 子类（包：dog）
public class Dog extends Animal {
    public void bark() {
        makeSound(); // ✅ 可访问 protected 方法
    }
}
```

### 4. `public`
- **最宽松的访问权限**。
- 任何类都可以访问。
- 一个 `.java` 文件中最多只能有一个 `public` 类，且类名必须与文件名一致。

```java
public class Calculator {
    public static int add(int a, int b) {
        return a + b;
    }
}
// 任何地方都可调用 Calculator.add(2, 3);
```

---

## 修饰符使用范围

| 成员类型 | `private` | 默认 | `protected` | `public` |
|----------|----------|------|-------------|----------|
| 类（外部类） | ❌ | ✅ | ❌ | ✅ |
| 嵌套类（static inner class） | ✅ | ✅ | ✅ | ✅ |
| 方法 | ✅ | ✅ | ✅ | ✅ |
| 变量（字段） | ✅ | ✅ | ✅ | ✅ |
| 构造方法 | ✅ | ✅ | ✅ | ✅ |

> ⚠️ 注意：**外部类（top-level class）不能用 `protected` 或 `private` 修饰**。

---

## 最佳实践 ✅

1. **优先使用最严格的访问权限**（最小权限原则）。
2. 字段尽量设为 `private`，通过 `public` 方法控制访问（封装）。
3. 工具类的方法通常设为 `public static`。
4. 如果不确定用什么，先用 `private`，后续根据需要放宽。

---

## 常见问题

### Q：为什么 `main` 方法是 `public static void`？
- `public`：JVM 需要从外部调用它。
- `static`：无需创建对象即可执行。
- `void`：不需要返回值。

### Q：`protected` 和默认有什么区别？
- 默认：仅同包可见。
- `protected`：同包 + **所有子类**（即使子类在别的包）。

---





